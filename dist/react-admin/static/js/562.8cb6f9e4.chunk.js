(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[562],{8077:function(e,t,n){"use strict";n.d(t,{Rd:function(){return y},h8:function(){return T},B9:function(){return S},RT:function(){return k},UV:function(){return b},Q4:function(){return p},dA:function(){return E},JV:function(){return g},Vd:function(){return h},bG:function(){return f},lE:function(){return w},p:function(){return m},gG:function(){return C},OC:function(){return j},$r:function(){return P},zb:function(){return I},x$:function(){return x},JR:function(){return v},ul:function(){return Z},n$:function(){return l}});var r=n(1413),i=n(4569),o=n.n(i),a=n(2808),s=n.n(a),u=n(7607),c=n(3695),d=o().create({});d.interceptors.request.use((function(e){return e.url.includes("/v3/")||(e.url="/v1_0"+e.url),u.Z.getStorage("tokenName")&&u.Z.getStorage("tokenValue")&&(e.headers.Authorization=u.Z.getStorage("tokenName")+" "+"".concat(u.Z.getStorage("tokenValue"))),!e.data||"multiple/form-data"===e.headers["Content-Type"]||"application/json"===e.headers["Content-Type"]||"application/x-www-form-urlencoded"!==e.headers["Content-Type"]&&"post"!==e.method||(e.data=s().stringify(e.data,{allowDots:!0})),"get"===e.method&&(e.params=(0,r.Z)((0,r.Z)({},e.params),{},{time:(new Date).getTime()})),e})),d.interceptors.response.use((function(e){if(e.status>=200&&e.status<300)return 401===e.data.code?c.ZP.error(e.data.error):e.data.code>=-1&&e.data.code<=-1&&(window.location.href="/login"),e.data}),(function(e){throw c.ZP.error(e.message),new Error("\u7f51\u7edc\u9519\u8bef")}));var l=function(e){return d({url:"/login/doLogin",method:"POST",data:e})},f=function(){return d.get("/system/user/current/user")},m=function(e){return d.get("/v3/weather/weatherInfo?key=6d78e0a70cbe6fc669f1a0705a85a5b5&city="+e)},p=function(){return d.get("/v3/ip?key=6d78e0a70cbe6fc669f1a0705a85a5b5")},h=function(e){return d.get("/system/role/page",{params:e})},g=function(e){return d.get("/system/role/list",{params:e})},x=function(e){return d.post("/system/role/save",e)},Z=function(e){return d.post("/system/role/update",e)},y=function(e){return d.delete("/system/role/remove",{params:{ids:e}})},j=function(e){return d.post("/system/role/relation/api",e)},w=function(e){return d.get("/system/user/page",{params:e})},v=function(e){return d.post("/system/user/save",e)},I=function(e){return d.post("/system/user/reset/password",{id:e})},T=function(e){return d.delete("/system/user/remove",{params:{ids:e}})},S=function(e){return d.post("/system/user/disable",e)},b=function(e){return d.get("/system/api/page",{params:e})},k=function(e){return d.get("/system/api/list",{params:e})},C=function(){return d.get("/system/api/refresh")},P=function(e){return d.post("/system/user/relation/role",e)},E=function(e){return d.get("/system/logs/page",{params:e})}},6273:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r=n(5861),i=n(1413),o=n(9439),a=n(7757),s=n.n(a),u=n(2791),c=n(9220),d=n(3695),l=n(8164),f=n(9004),m=n(3272),p=n(3231),h=n(7031),g=n(7309),x=n(8006),Z=n(2426),y=n.n(Z),j=n(1730),w=n(7106),v=n(8077),I=n(184);function T(){var e=(0,u.useState)(!0),t=(0,o.Z)(e,2),n=t[0],a=t[1],Z=(0,u.useState)({list:[],count:0}),T=(0,o.Z)(Z,2),S=T[0],b=T[1],k=(0,u.useState)({current:1,size:10,status:""}),C=(0,o.Z)(k,2),P=C[0],E=C[1],B=[{title:"\u5e8f\u53f7",dataIndex:"index",fixed:"left",width:80,render:function(e,t,n){return"".concat((P.current-1)*P.size+n+1)}},{title:"\u63a5\u53e3\u540d\u79f0",dataIndex:"apiName",fixed:"left",width:150,render:function(e){return(0,I.jsx)(c.Z,{placement:"topLeft",title:e,children:e})}},{title:"\u63a5\u53e3\u8bf7\u6c42\u65b9\u5f0f",dataIndex:"apiMethod",width:150},{title:"\u63a5\u53e3\u8def\u5f84",dataIndex:"apiUrl",width:250},{title:"\u63a5\u53e3\u6743\u9650\u6807\u8bc6",dataIndex:"apiFlag",width:200},{title:"\u521b\u5efa\u4eba",width:150,dataIndex:"createdBy"},{title:"\u66f4\u65b0\u4eba",width:150,dataIndex:"updatedBy"},{title:"\u66f4\u65b0\u65f6\u95f4",width:200,dataIndex:"updatedTime",render:function(e){return(0,I.jsx)("span",{children:e?y()(e).format("YYYY-MM-DD HH:mm:ss"):""})}},{title:"\u521b\u5efa\u65f6\u95f4",width:200,dataIndex:"createdTime",render:function(e){return(0,I.jsx)("span",{children:e?y()(e).format("YYYY-MM-DD HH:mm:ss"):""})}},{title:"\u63a5\u53e3\u4f5c\u8005",width:150,dataIndex:"apiAuthor"}],D=function(){var e=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,v.UV)((0,i.Z)((0,i.Z)({},P),{},{status:P.status?P.status:void 0})).then((function(e){200==e.code?b({list:e.records,count:e.total}):d.ZP.error(e.error)})).finally((function(){a(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){a(!0),D()}),[P]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(l.Z,{children:[(0,I.jsx)(l.Z.Item,{children:(0,I.jsx)("a",{href:"",children:"\u9996\u9875"})}),(0,I.jsx)(l.Z.Item,{children:(0,I.jsx)("a",{href:"",children:"\u6743\u9650\u7ba1\u7406"})})]}),(0,I.jsx)(f.Z,{style:{width:"100%",marginTop:20,overflow:"hidden"},children:(0,I.jsxs)(m.Z,(0,i.Z)((0,i.Z)({},{wrapperCol:{span:8}}),{},{onFinish:function(e){E((0,i.Z)((0,i.Z)((0,i.Z)({},P),e),{},{current:1}))},children:[(0,I.jsx)(m.Z.Item,{label:"\u8bf7\u6c42\u65b9\u5f0f",name:"status",initialValue:"",children:(0,I.jsxs)(p.ZP.Group,{buttonStyle:"solid",children:[(0,I.jsx)(p.ZP.Button,{value:"",children:"\u5168\u90e8"}),(0,I.jsx)(p.ZP.Button,{value:"GET",children:"GET"}),(0,I.jsx)(p.ZP.Button,{value:"POST",children:"POST"}),(0,I.jsx)(p.ZP.Button,{value:"DELETE",children:"DELETE"})]})}),(0,I.jsx)(m.Z.Item,{label:"\u63a5\u53e3\u540d\u79f0",name:"apiName",children:(0,I.jsx)(h.Z,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u540d\u79f0"})}),(0,I.jsx)(m.Z.Item,{label:"\u63a5\u53e3\u8def\u5f84",name:"apiUrl",children:(0,I.jsx)(h.Z,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u8def\u5f84"})}),(0,I.jsx)(m.Z.Item,{label:"\u6743\u9650\u6807\u8bc6",name:"apiFlag",children:(0,I.jsx)(h.Z,{placeholder:"\u8bf7\u8f93\u5165\u6743\u9650\u6807\u8bc6"})}),(0,I.jsx)(m.Z.Item,{label:"\u63a5\u53e3\u4f5c\u8005",name:"apiAuthor",children:(0,I.jsx)(h.Z,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u4f5c\u8005"})}),(0,I.jsx)(g.Z,{type:"primary",className:"control",icon:(0,I.jsx)(j.Z,{}),htmlType:"submit",children:"\u7b5b\u9009"})]}))}),(0,I.jsxs)(f.Z,{style:{width:"100%",marginTop:20,overflow:"hidden"},loading:n,children:[(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:25},children:[(0,I.jsxs)("p",{style:{marginBottom:0},children:["\u6839\u636e\u7b5b\u9009\u6761\u4ef6\u5171\u67e5\u8be2\u5230",S.count,"\u6761\u7ed3\u679c"]}),(0,I.jsx)(g.Z,{type:"primary",icon:(0,I.jsx)(w.Z,{}),onClick:function(){(0,v.gG)().then((function(e){200==e.code?d.ZP.success(e.data):d.ZP.error(e.error)}))},children:"\u5237\u65b0\u6743\u9650\u63a5\u53e3"})]}),(0,I.jsx)(x.Z,{className:"menuMainTainTable",columns:B,dataSource:S.list||[],scroll:{x:1300},pagination:{pageSize:P.size,current:P.current,onChange:function(e){E((0,i.Z)((0,i.Z)({},P),{},{current:e}))},total:S.count,showSizeChanger:!1},rowKey:function(e){return e.id}})]})]})}},7607:function(e,t){"use strict";var n={getCookie:function(e){var t=document.cookie,n=t.indexOf(e+"=");if(n>-1){n=n+e.length+1;var r=t.indexOf(";",n);return r=r<0?t.length:r,decodeURIComponent(t.substring(n,r))}return""},setCookie:function(e,t,n){var r=n,i=new Date;i.setTime(i.getTime()+24*r*3600*1e3),document.cookie=e+"="+encodeURIComponent(t)+";expires="+(void 0===r?"":i.toUTCString())},delCookie:function(e){var t=this.getCookie(e);!1!==t&&this.setCookie(e,t,-1)},getStorage:function(e){return localStorage.getItem(e)},setStorage:function(e,t){return localStorage.setItem(e,t)},delStorage:function(e){localStorage.removeItem(e)}};t.Z=n},4654:function(){}}]);
//# sourceMappingURL=562.8cb6f9e4.chunk.js.map